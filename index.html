<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Tarot | Card Picker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .card {
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .card-back {
            background: repeating-linear-gradient(
                45deg,
                #1a1a2e,
                #1a1a2e 10px,
                #16213e 10px,
                #16213e 20px
            );
        }
        .flip-card {
            perspective: 1000px;
        }
        .flip-card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        .flip-card-front, .flip-card-back {
            backface-visibility: hidden;
        }
        .flip-card-back {
            transform: rotateY(180deg);
        }
        .history-item {
            transition: all 0.2s ease;
        }
        .history-item:hover {
            background-color: rgba(255,255,255,0.05);
        }
        @keyframes drawCard {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .animate-draw {
            animation: drawCard 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-12 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-2 bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 bg-clip-text text-transparent">Minimal Tarot</h1>
            <p class="text-gray-400 max-w-2xl mx-auto">A simple, elegant tarot card reader with minimalistic designs and insightful interpretations.</p>
        </header>

        <!-- Main Content -->
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Left Panel - Card Selection -->
            <div class="lg:w-2/3">
                <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold">Card Picker</h2>
                        <div class="flex space-x-2">
                            <button id="clearBtn" class="px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm">Clear</button>
                            <button id="drawBtn" class="px-4 py-1 bg-purple-600 hover:bg-purple-500 rounded-lg text-sm font-medium">Draw Card</button>
                        </div>
                    </div>

                    <!-- Spread Selection -->
                    <div class="mb-8">
                        <h3 class="text-lg font-medium mb-3">Select a Spread</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <button data-spread="single" class="spread-btn bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition active:bg-purple-600">Single Card</button>
                            <button data-spread="three" class="spread-btn bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition active:bg-purple-600">Past/Present/Future</button>
                            <button data-spread="celtic" class="spread-btn bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition active:bg-purple-600">Celtic Cross</button>
                            <button data-spread="custom" class="spread-btn bg-gray-700 hover:bg-gray-600 py-2 px-3 rounded-lg text-sm transition active:bg-purple-600">Custom Spread</button>
                        </div>

                        <!-- Custom Spread Options (hidden by default) -->
                        <div id="customSpreadOptions" class="mt-4 hidden">
                            <div class="flex items-center space-x-3 mb-3">
                                <input type="number" id="customCardCount" min="1" max="10" value="3" class="w-16 bg-gray-700 border border-gray-600 rounded px-3 py-1">
                                <label for="customCardCount">Number of Cards</label>
                            </div>
                            <div>
                                <label class="block mb-1">Positions Meaning</label>
                                <div id="positionInputs">
                                    <input type="text" placeholder="Position 1" class="position-input bg-gray-700 border border-gray-600 rounded px-3 py-1 mb-2 w-full">
                                    <input type="text" placeholder="Position 2" class="position-input bg-gray-700 border border-gray-600 rounded px-3 py-1 mb-2 w-full">
                                    <input type="text" placeholder="Position 3" class="position-input bg-gray-700 border border-gray-600 rounded px-3 py-1 mb-2 w-full">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Card Display Area -->
                    <div id="cardDisplay" class="min-h-64 flex flex-wrap justify-center gap-4">
                        <!-- Cards will appear here -->
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-cards fa-3x mb-3"></i>
                            <p>Select a spread and click "Draw Card"</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Card Info & History -->
            <div class="lg:w-1/3">
                <!-- Card Interpretation -->
                <div class="bg-gray-800 rounded-xl p-6 shadow-lg mb-6">
                    <h2 class="text-2xl font-semibold mb-4">Interpretation</h2>
                    <div id="interpretation" class="text-gray-300">
                        <p class="italic text-gray-500">Your card interpretation will appear here...</p>
                    </div>
                </div>

                <!-- Reading History -->
                <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-semibold">History</h2>
                        <button id="clearHistory" class="text-sm text-gray-400 hover:text-white">Clear All</button>
                    </div>
                    <div id="historyList" class="space-y-3 max-h-96 overflow-y-auto pr-2">
                        <!-- History items will appear here -->
                        <div class="text-gray-500 italic py-2 text-center">Your reading history will appear here</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Card Details -->
    <div id="cardModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalCardName" class="text-xl font-bold"></h3>
                <button id="closeModal" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="flex justify-center mb-4">
                <div class="flip-card w-40 h-64 mx-auto" id="modalFlipCard">
                    <div class="flip-card-inner relative w-full h-full">
                        <div class="flip-card-front absolute w-full h-full bg-white rounded-lg shadow-md flex items-center justify-center">
                            <img id="modalCardImage" src="" alt="Card" class="w-full h-full object-cover rounded-lg">
                        </div>
                        <div class="flip-card-back absolute w-full h-full card-back rounded-lg flex items-center justify-center">
                            <div class="text-white text-center p-4">
                                <i class="fas fa-star text-yellow-400 text-3xl mb-2"></i>
                                <p class="text-xs">Minimal Tarot</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="space-y-4">
                <div>
                    <h4 class="font-medium text-purple-400">Upright Meaning</h4>
                    <p id="modalUpright" class="text-gray-300"></p>
                </div>
                <div>
                    <h4 class="font-medium text-purple-400">Reversed Meaning</h4>
                    <p id="modalReversed" class="text-gray-300"></p>
                </div>
                <div>
                    <h4 class="font-medium text-purple-400">Keywords</h4>
                    <p id="modalKeywords" class="text-gray-300"></p>
                </div>
            </div>
            <button id="flipModalCard" class="mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg w-full">
                Flip Card
            </button>
        </div>
    </div>

    <script>
        // Tarot Card Data
        const tarotDeck = [
            // Major Arcana
            { name: "The Fool", upright: "New beginnings, spontaneity, a leap of faith", reversed: "Recklessness, risk-taking, lack of planning", keywords: "Innocence, freedom, adventure", image: "fool.png" },
            { name: "The Magician", upright: "Manifestation, resourcefulness, power", reversed: "Manipulation, trickery, untapped talents", keywords: "Skill, willpower, concentration", image: "magician.png" },
            { name: "The High Priestess", upright: "Intuition, mystery, subconscious mind", reversed: "Hidden agendas, repressed intuition", keywords: "Wisdom, secrets, intuition", image: "priestess.png" },
            { name: "The Empress", upright: "Fertility, femininity, abundance", reversed: "Dependence, smothering, lack of growth", keywords: "Nature, nurturing, creativity", image: "empress.png" },
            { name: "The Emperor", upright: "Authority, structure, control", reversed: "Tyranny, rigidity, domination", keywords: "Stability, power, protection", image: "emperor.png" },
            { name: "The Hierophant", upright: "Tradition, conformity, morality", reversed: "Rebellion, unconventional beliefs", keywords: "Religion, group identification", image: "hierophant.png" },
            { name: "The Lovers", upright: "Love, harmony, relationships", reversed: "Imbalance, misalignment of values", keywords: "Partnership, choices, union", image: "lovers.png" },
            { name: "The Chariot", upright: "Willpower, success, determination", reversed: "Lack of control, aggression", keywords: "Victory, ambition, control", image: "chariot.png" },
            { name: "Strength", upright: "Courage, persuasion, influence", reversed: "Weakness, self-doubt, insecurity", keywords: "Compassion, inner strength", image: "strength.png" },
            { name: "The Hermit", upright: "Soul-searching, introspection, guidance", reversed: "Isolation, loneliness, withdrawal", keywords: "Solitude, wisdom, retreat", image: "hermit.png" },
            // Minor Arcana - Cups
            { name: "Ace of Cups", upright: "New feelings, spirituality, intuition", reversed: "Emotional loss, blocked creativity", keywords: "Love, compassion, creativity", image: "ace_cups.png" },
            { name: "Two of Cups", upright: "Partnership, connection, mutual attraction", reversed: "Imbalance, miscommunication, tension", keywords: "Union, friendship, harmony", image: "two_cups.png" },
            { name: "Three of Cups", upright: "Celebration, friendship, creativity", reversed: "Gossip, excess, isolation", keywords: "Joy, community, shared happiness", image: "three_cups.png" },
            // Minor Arcana - Swords
            { name: "Ace of Swords", upright: "Breakthroughs, new ideas, mental clarity", reversed: "Confusion, chaos, lack of clarity", keywords: "Truth, justice, intellect", image: "ace_swords.png" },
            { name: "Two of Swords", upright: "Indecision, choices, stalemate", reversed: "Indecision, confusion, imbalance", keywords: "Balance, difficult choices", image: "two_swords.png" },
            { name: "Three of Swords", upright: "Heartbreak, emotional pain, grief", reversed: "Recovery, forgiveness, moving on", keywords: "Pain, separation, sorrow", image: "three_swords.png" },
            // Minor Arcana - Wands
            { name: "Ace of Wands", upright: "Inspiration, new opportunities, growth", reversed: "Delays, lack of motivation", keywords: "Energy, inspiration, desire", image: "ace_wands.png" },
            { name: "Two of Wands", upright: "Planning, discovery, future plans", reversed: "Fear of unknown, lack of planning", keywords: "Planning, discovery, decisions", image: "two_wands.png" },
            { name: "Three of Wands", upright: "Progress, expansion, foresight", reversed: "Obstacles, delays, frustration", keywords: "Preparation, foresight, enterprise", image: "three_wands.png" },
            // Minor Arcana - Pentacles
            { name: "Ace of Pentacles", upright: "New financial opportunity, prosperity, security", reversed: "Missed opportunity, lack of planning", keywords: "Wealth, practicality, security", image: "ace_pentacles.png" },
            { name: "Two of Pentacles", upright: "Balance, adaptability, time management", reversed: "Disorganization, financial loss", keywords: "Balance, adaptability, change", image: "two_pentacles.png" },
            { name: "Three of Pentacles", upright: "Teamwork, collaboration, learning", reversed: "Lack of teamwork, disorganized", keywords: "Collaboration, learning, implementation", image: "three_pentacles.png" }
        ];

        // Spread templates
        const spreads = {
            single: {
                name: "Single Card",
                positions: ["General Guidance"],
                description: "A simple one-card reading for quick insight."
            },
            three: {
                name: "Past/Present/Future",
                positions: ["Past", "Present", "Future"],
                description: "Understand how past events influence your present and future."
            },
            celtic: {
                name: "Celtic Cross",
                positions: [
                    "Current Situation", 
                    "Challenge", 
                    "Subconscious Influences", 
                    "Recent Past", 
                    "Near Future", 
                    "Your Hopes/Fears", 
                    "External Influences", 
                    "Advice", 
                    "Outcome"
                ],
                description: "A comprehensive 10-card spread for deep insight."
            },
            custom: {
                name: "Custom Spread",
                positions: [],
                description: "Create your own spread with custom positions."
            }
        };

        // State management
        let currentSpread = spreads.single;
        let readingHistory = JSON.parse(localStorage.getItem('tarotHistory')) || [];
        let currentReading = [];

        // DOM Elements
        const cardDisplay = document.getElementById('cardDisplay');
        const interpretation = document.getElementById('interpretation');
        const historyList = document.getElementById('historyList');
        const spreadButtons = document.querySelectorAll('.spread-btn');
        const drawBtn = document.getElementById('drawBtn');
        const clearBtn = document.getElementById('clearBtn');
        const clearHistoryBtn = document.getElementById('clearHistory');
        const customSpreadOptions = document.getElementById('customSpreadOptions');
        const customCardCount = document.getElementById('customCardCount');
        const positionInputs = document.getElementById('positionInputs');
        const cardModal = document.getElementById('cardModal');
        const closeModal = document.getElementById('closeModal');
        const flipModalCard = document.getElementById('flipModalCard');
        const modalFlipCard = document.getElementById('modalFlipCard');

        // Initialize
        function init() {
            renderHistory();
            
            // Event listeners
            spreadButtons.forEach(btn => {
                btn.addEventListener('click', () => selectSpread(btn.dataset.spread));
            });
            
            drawBtn.addEventListener('click', drawCards);
            clearBtn.addEventListener('click', clearReading);
            clearHistoryBtn.addEventListener('click', clearHistory);
            closeModal.addEventListener('click', () => cardModal.classList.add('hidden'));
            flipModalCard.addEventListener('click', () => modalFlipCard.classList.toggle('flipped'));
            
            // For custom spread
            customCardCount.addEventListener('change', updateCustomPositions);
            
            // Default to single card spread
            selectSpread('single');
        }

        // Select spread type
        function selectSpread(spreadType) {
            currentSpread = {...spreads[spreadType]};
            
            // Highlight selected spread button
            spreadButtons.forEach(btn => {
                if (btn.dataset.spread === spreadType) {
                    btn.classList.add('bg-purple-600', 'active:bg-purple-600');
                    btn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                } else {
                    btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                    btn.classList.remove('bg-purple-600', 'active:bg-purple-600');
                }
            });
            
            // Show/hide custom spread options
            if (spreadType === 'custom') {
                customSpreadOptions.classList.remove('hidden');
                updateCustomPositions();
            } else {
                customSpreadOptions.classList.add('hidden');
            }
            
            // Clear current reading when changing spreads
            clearReading();
        }

        // Update custom positions based on card count
        function updateCustomPositions() {
            const count = parseInt(customCardCount.value);
            positionInputs.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = `Position ${i+1}`;
                input.className = 'position-input bg-gray-700 border border-gray-600 rounded px-3 py-1 mb-2 w-full';
                positionInputs.appendChild(input);
            }
            
            currentSpread.positions = Array(count).fill().map((_, i) => `Position ${i+1}`);
        }

        // Get custom position names
        function getCustomPositions() {
            if (currentSpread.name !== 'Custom Spread') return currentSpread.positions;
            
            const inputs = document.querySelectorAll('.position-input');
            return Array.from(inputs).map(input => input.value || input.placeholder);
        }

        // Draw cards for current spread
        function drawCards() {
            clearReading();
            
            const positions = getCustomPositions();
            currentReading = [];
            
            // Shuffle deck and pick cards
            const shuffledDeck = [...tarotDeck].sort(() => Math.random() - 0.5);
            const selectedCards = shuffledDeck.slice(0, positions.length);
            
            // Create reading with positions
            currentReading = positions.map((position, i) => {
                const card = selectedCards[i];
                const isReversed = Math.random() > 0.7; // 30% chance of reversal
                
                return {
                    card,
                    position,
                    isReversed,
                    date: new Date().toISOString()
                };
            });
            
            renderReading();
            saveToHistory();
        }

        // Render current reading
        function renderReading() {
            cardDisplay.innerHTML = '';
            
            if (currentReading.length === 0) {
                cardDisplay.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <i class="fas fa-cards fa-3x mb-3"></i>
                        <p>Select a spread and click "Draw Card"</p>
                    </div>
                `;
                interpretation.innerHTML = '<p class="italic text-gray-500">Your card interpretation will appear here...</p>';
                return;
            }
            
            currentReading.forEach((reading, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `flip-card w-32 h-52 mx-auto cursor-pointer ${reading.isReversed ? 'flipped' : ''}`;
                cardElement.innerHTML = `
                    <div class="flip-card-inner relative w-full h-full">
                        <div class="flip-card-front absolute w-full h-full bg-white rounded-lg shadow-md overflow-hidden">
                            <div class="w-full h-full bg-gray-100 flex items-center justify-center">
                                <div class="text-center p-2">
                                    <div class="text-xs font-bold text-gray-800 mb-1">${reading.card.name}</div>
                                    <div class="text-5xl text-gray-600">${getCardSymbol(reading.card.name)}</div>
                                </div>
                            </div>
                        </div>
                        <div class="flip-card-back absolute w-full h-full card-back rounded-lg flex items-center justify-center">
                            <div class="text-white text-center p-4">
                                <i class="fas fa-star text-yellow-400 text-2xl mb-1"></i>
                                <p class="text-xs">Minimal Tarot</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-2 text-xs text-gray-400">${reading.position}</div>
                `;
                
                cardElement.addEventListener('click', () => showCardDetails(reading, index));
                cardElement.classList.add('animate-draw');
                cardElement.style.animationDelay = `${index * 0.1}s`;
                cardDisplay.appendChild(cardElement);
            });
            
            // Show interpretation for first card by default
            if (currentReading.length > 0) {
                showInterpretation(0);
            }
        }

        // Get symbol for card (simplified for minimal design)
        function getCardSymbol(cardName) {
            if (cardName.includes('Cups')) return 'üíß';
            if (cardName.includes('Swords')) return '‚öîÔ∏è';
            if (cardName.includes('Wands')) return 'üî•';
            if (cardName.includes('Pentacles')) return 'ü™ô';
            
            // Major arcana - use first letter
            return cardName.split(' ')[0].charAt(0);
        }

        // Show interpretation for specific card in reading
        function showInterpretation(index) {
            const reading = currentReading[index];
            const card = reading.card;
            
            interpretation.innerHTML = `
                <h3 class="text-lg font-medium mb-1">${card.name} ${reading.isReversed ? '(Reversed)' : ''}</h3>
                <p class="text-purple-400 mb-2">${reading.position}</p>
                <p class="mb-3">${reading.isReversed ? card.reversed : card.upright}</p>
                <p class="text-sm text-gray-400"><span class="font-medium">Keywords:</span> ${card.keywords}</p>
            `;
        }

        // Show card details in modal
        function showCardDetails(reading, index) {
            const card = reading.card;
            
            // Set modal content
            document.getElementById('modalCardName').textContent = `${card.name} ${reading.isReversed ? '(Reversed)' : ''}`;
            document.getElementById('modalUpright').textContent = card.upright;
            document.getElementById('modalReversed').textContent = card.reversed;
            document.getElementById('modalKeywords').textContent = card.keywords;
            
            // Reset flip state
            modalFlipCard.classList.remove('flipped');
            if (reading.isReversed) {
                modalFlipCard.classList.add('flipped');
            }
            
            // Show position in modal
            const positionElement = document.createElement('p');
            positionElement.className = 'text-purple-400 mb-2';
            positionElement.textContent = reading.position;
            document.getElementById('modalCardName').after(positionElement);
            
            // Show modal
            cardModal.classList.remove('hidden');
            
            // Update interpretation to match clicked card
            showInterpretation(index);
        }

        // Clear current reading
        function clearReading() {
            currentReading = [];
            renderReading();
        }

        // Save current reading to history
        function saveToHistory() {
            if (currentReading.length === 0) return;
            
            const readingToSave = {
                spread: currentSpread.name,
                cards: [...currentReading],
                date: new Date().toISOString()
            };
            
            readingHistory.unshift(readingToSave);
            if (readingHistory.length > 20) {
                readingHistory = readingHistory.slice(0, 20);
            }
            
            localStorage.setItem('tarotHistory', JSON.stringify(readingHistory));
            renderHistory();
        }

        // Render reading history
        function renderHistory() {
            if (readingHistory.length === 0) {
                historyList.innerHTML = '<div class="text-gray-500 italic py-2 text-center">Your reading history will appear here</div>';
                return;
            }
            
            historyList.innerHTML = '';
            readingHistory.forEach((reading, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item bg-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-600';
                
                const date = new Date(reading.date).toLocaleString();
                const firstCard = reading.cards[0];
                
                historyItem.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-medium">${reading.spread}</h4>
                            <p class="text-xs text-gray-400">${date}</p>
                        </div>
                        <span class="text-xs bg-gray-600 px-2 py-1 rounded">${reading.cards.length} cards</span>
                    </div>
                    <div class="mt-2 flex items-center">
                        <div class="w-8 h-12 mr-2 bg-gray-600 rounded flex items-center justify-center text-xs">
                            ${getCardSymbol(firstCard.card.name)}
                        </div>
                        <div>
                            <p class="text-sm">${firstCard.card.name} ${firstCard.isReversed ? '(R)' : ''}</p>
                            <p class="text-xs text-gray-400">${firstCard.position}</p>
                        </div>
                    </div>
                `;
                
                historyItem.addEventListener('click', () => viewHistoryReading(index));
                historyList.appendChild(historyItem);
            });
        }

        // View a reading from history
        function viewHistoryReading(index) {
            const historyReading = readingHistory[index];
            currentSpread = {
                name: historyReading.spread,
                positions: historyReading.cards.map(c => c.position)
            };
            
            currentReading = [...historyReading.cards];
            renderReading();
            
            // Scroll to top
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Clear all history
        function clearHistory() {
            if (confirm('Are you sure you want to clear all your reading history?')) {
                readingHistory = [];
                localStorage.setItem('tarotHistory', JSON.stringify(readingHistory));
                renderHistory();
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
